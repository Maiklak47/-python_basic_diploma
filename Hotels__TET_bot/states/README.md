<h1 align="center">Hotels_TET_bot

[![Telegram URL](https://www.dampftbeidir.de/mediafiles/tpl/icon-telegram.png)](https://web.telegram.org/k/#@Best_T_E_T_bot) 
</h1>

***
# Инструкция по использованию Hotels_TET_bot

## Краткое описание

Данный бот позволяет найти выгодное предложение  по поиску отелей на платформе [Hotels.com](https://hotels.com/):
* подбирать отели по самой низкой или высокой цене;
* подбирать отели по лучшему соотношению цена/расстояние от центра города;  
* задавать количество выводимых отелей;  
* задавать диапазон цен.
* бот не использует и не запрашивает никакие персональные данные.

**Для разработки и функционирования проекта используется открытый API Hotels, который расположен на сайте [rapidapi.com](https://rapidapi.com/apidojo/api/hotels4/).**

***

## Локальная установка
Эти инструкции помогут вам развернуть проект на локальном компьютере для разработки и тестирования.

**Перед тем, как начать:**
- Если вы не пользуетесь `Python 3`, вам нужно установить инструмент `virtualenv` при помощи `pip install virtualenv`. 
Если вы используете `Python 3`, у вас уже установлен модуль [venv](https://docs.python.org/3/library/venv.html) в стандартной библиотеке.

**Установка библиотек:**
- Для установки библиотек введите в консоли
```
pip install -r requirements.txt
```
**Данный прект написан на ```Python 3.10```**
Для работы проекта используются следующие библиотеки:

* pyTelegramBotAPI
* requests
* loguru
* python-dotenv
* requests
* utils
* python-telegram-bot-calendar

***
## Запуск

### TOKEN_BOT

Для взаимодействия вашего бота с вашим ботом телеграм вам нужно создать файл .env в корне каталога и добавить туда строку
TOKEN_BOT = здесь вам нужно написать ваш токен

### TOKEN_API
Для взаимодействия вашего бота с API базой Hotels.com следует в файл .env в корне каталога добавить строку

TOKEN_API = здесь вам нужно написать ваш токен
#### Бот запускается командой из корневой папки проекта
```
python main.py
```


### Ваш бот готов к использованию
***
## Взаимодействие c ботом
### Чтобы бот начал с вами общение, вам нужно ввести одну из двух команд: /start или /help. 
При подключении к боту и вводу команды */start*, бот выведет приветственное сообщение, чтобы
получить приветственную аватарку, необходимо в папку *welcome_jpg* поместить соответсвующую
картинку и назвать ее *welcome.jpg*. 
Вторым сообщением выведет список доступных команд.
### /help
При вводе команды выведет список доступных команд.

### /lowprice
Команда запрашивает информацию у пользователя и выводит список отелей, сортированных по цене. Сначала идут самые дешевые.
1. При вводе команды запросит у пользователя:
    1. Город, в котором будет производиться поиск отеля.
    2. Запросит у пользователя количество отелей, которое нужно вывести.
    3. Выведет клавиатуру-календарь, в которой пользователь должен указать дату заезда и выезда в отель.
    4. Спросит у пользователя, нужно ли ему показывать фотографии отелей и если нужно, то сколько.
2. После обработки ответов от пользователя выведет информацию по каждому найденному отелю в формате:
    * Сообщение c информацией об отеле:
        * Название отеля.
        * Адрес отеля.
        * Рейтинг отеля.
        * Удаленность отеля от центра города.
        * Цена за ночь.
        * Цена за весь срок пребывания.
        * Ссылка на сайт отеля.
    * Сообщение с фотографиями отеля (если требуется).

### /highprice
Команда запрашивает информацию у пользователя и выводит список отелей, сортированных по цене. Сначала идут самые дорогие.
1. При вводе команды запросит у пользователя:
    1. Город, в котором будет производиться поиск отеля.
    2. Запросит у пользователя количество отелей, которое нужно вывести.
    3. Выведет клавиатуру-календарь, в которой пользователь должен указать дату заезда и выезда в отель.
    4. Спросит у пользователя, нужно ли ему показывать фотографии отелей и если нужно, то сколько.
2. После обработки ответов от пользователя выведет информацию по каждому найденному отелю в формате:
    * Сообщение c информацией об отеле:
        * Название отеля.
        * Адрес отеля.
        * Рейтинг отеля.
        * Удаленность отеля от центра города.
        * Цена за ночь.
        * Цена за весь срок пребывания.
        * Ссылка на сайт отеля.
    * Сообщение с фотографиями отеля (если требуется).
### /bestdeal
Команда запрашивает информацию у пользователя и выводит список отелей, сортированных по цене (первыми идут самые дешевые)
и по расстоянию от центра города. 
1. При вводе команды запросит у пользователя:
    1. Город, в котором будет производиться поиск отеля.
    2. Запросит минимальную и максимальную стоимость в рублях.
    3. Запросит минимальную и максимальную удаленность отеля от центра города в км.
    4. Запросит у пользователя количество отелей, которое нужно вывести.
    5. Выведет клавиатуру-календарь, в которой пользователь должен указать дату заезда и выезда.
    7. Спросит у пользователя, нужно ли ему показывать фотографии отелей и если нужно, то сколько.
2. После обработки ответов от пользователя выведет информацию по каждому найденному отелю в формате:
   * Сообщение c информацией об отеле:
        * Название отеля.
        * Адрес отеля.
        * Рейтинг отеля.
        * Удаленность отеля от центра города.
        * Цена за ночь.
        * Цена за весь срок пребывания.
        * Ссылка на сайт отеля.
   * Сообщение с фотографиями отеля (если требуется).
### /history
Отправляет пользователю его историю поиска, если таковая имеется.
1. Название введенной пользователем команды.
2. Время начала поиска.
3. Список названий найденных отелей по запросу.